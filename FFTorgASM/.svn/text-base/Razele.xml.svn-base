<?xml version="1.0" encoding="utf-8" ?>
<Patches>
  <Patch name="Death Sentence - Ignore Cancel:Dead">
    <Location file="BATTLE_BIN"
              offset="11c240">
      10 00 42 30
      05 00 40 14
      20 00 02 34
      28 00 00 a6
    </Location>
  </Patch>

  <Patch name="Increase Jump damage by 3/2 regardless of weapon">
    <Location file="BATTLE_BIN"
              offset="11eec2">
      63
    </Location>
  </Patch>

  <Patch name="No starting items">
    <Location file="SCUS_942_21"
              offset="3322c">
	  <!--
	  Old: 0x80042A2C   li $v0,0x05
	  New: 0x80042A2C   j 0x80042AA8
	  -->
      aa 0a 01 08
    </Location>
  </Patch>

  <Patch name="Broken / stolen items can be bought back at Fur Shop">
    <Location file="BATTLE_BIN"
              offset="126470">
      22 4e 05 08
    </Location>
    <Location file="BATTLE_BIN"
              offset="0ec888">
      1980043C
      982D848C
      BA018490
      02210400
      0F008014
      00000000
      0D00A010
      FF000434
      0B00A410
      00000000
      0580043C
      94948434
      21208500
      00008290
      0001432C
      02006014
      00000000
      FE000234
      01004224
      000082A0
      1980023C
      902D428C
      1D350608
      00000000
    </Location>
  </Patch>
  <Patch name="AI attacks transparent unit v1.1">
    <Location file="BATTLE_BIN" offset="12fd66">00</Location>
  </Patch>
  <Patch name="Transparent loses 100% accuracy bonus">
    <Location file="BATTLE_BIN" offset="11e4d0">00</Location>
  </Patch>
  <Patch name="No Random Battles">
    <Location file="WORLD_WLDCORE_BIN" offset="02770a">00</Location>
  </Patch>
  <Patch name="Defending reduces physical damage by 25%">
    <Location file="BATTLE_BIN" offset="11f378">4b 4d 05 08</Location>
    <Location file="BATTLE_BIN" offset="11e48a">42</Location>
    <Location file="BATTLE_BIN" offset="0ec52c">
      21204000
      58008390
      02006330
      03006014
      5B008290
      E0180608
      00000000
      CE382384
      21106000
      40100200
      21104300
      82100200
      CE3822A4
      982D228C
      5B004290
      E0180608
      00000000
    </Location>
  </Patch>
  <Patch name="Wall reduces all HP damage to 1">
    <Location file="BATTLE_BIN" offset="124ae2">42</Location>
    <Location file="BATTLE_BIN" offset="124b88">154E0508</Location>
    <Location file="BATTLE_BIN" offset="ec854">
      0A000210
      00000000
      1980023C
      982D428C
      5B004290
      01004230
      04000210
      00000000
      01000234
      E52E0608
      040062A4
      E32E0608
      00000000
    </Location>
  </Patch>
  <Patch name="Wall reduces physical damage by 99%, duration : 1 turn">
    <Location file="BATTLE_BIN" offset="124ae2">42</Location>
    <Location file="BATTLE_BIN" offset="11f3bc">d24d0508</Location>
    <Location file="BATTLE_BIN" offset="1267f0">d94d0508</Location>
    <Location file="BATTLE_BIN" offset="0ec748">
      5B006290
      01004230
      02004010
      1980043C
      CE3880A0
      F0180608
      00000000
    </Location>
    <Location file="BATTLE_BIN" offset="0ec764">
      01000234
      640002A2
      FD350608
      00000000
    </Location>
  </Patch>
  <Patch name="Float weak against Wind; Oil weak against Fire">
    <Location file="BATTLE_BIN" offset="11f464">B74D0508</Location>
    <Location file="BATTLE_BIN" offset="0ec6dc">
      982D438C
      5A006390
      40006430
      05008014
      80006430
      09008014
      00000000
      CF4D0508
      00000000
      F7384490
      10008430
      09008014
      00000000
      CF4D0508
      00000000
      F7384490
      80008430
      03008014
      00000000
      CF4D0508
      00000000
      CE384384
      40180300
      CE3843A4
      982D428C
      1B190608
      00000000
    </Location>
  </Patch>
  <Patch name="JP scroll glitch fix v1.1">
    <Location file="WORLD_WORLD_BIN" offset="03facc">D5010508</Location>
    <Location file="WORLD_WORLD_BIN" offset="060754">
      BE00A294
      2B205100
      03000410
      98000434
      B67E0408
      00000000
      B57E0408
      00000000
    </Location>
  </Patch>
  <Patch name="Special characters can do propositions">
    <Location file="WORLD_WLDCORE_BIN" offset="E834">04</Location>
  </Patch>
  <Patch name="Every monster is mountable">
    <Location file="BATTLE_BIN" offset="10d3e4">30</Location>
  </Patch>
  <Patch name="46 Undead Oracle is mountable">
    <Location file="BATTLE_BIN" offset="10d3d8">434d0508</Location>
    <Location file="BATTLE_BIN" offset="EC50C">
      03000292
      BAFF4224
      03004010
      03000292
      F8D00508
      00000000
      FBD00508
      00000000
    </Location>
  </Patch>
  <Patch name="No monster breeding">
    <Location file="WORLD_WORLD_BIN" offset="045b6e">42</Location>
  </Patch>
  <Patch name="Mighty Sword ignores equipment presence and hits monster">
    <Location file="BATTLE_BIN" offset="120a2c">FE</Location>
    <Location file="BATTLE_BIN" offset="120a8c">FE</Location>
    <Location file="BATTLE_BIN" offset="1209ee">02</Location>
  </Patch>
  <Patch name="Selling items at Fur Shop costs 1/4 normal price">
    <Location file="WORLD_WORLD_BIN" offset="04374c">82</Location>
  </Patch>
  <Patch name="Buying items at Fur Shop costs 1 x normal price">
    <Location file="WORLD_WORLD_BIN" offset="057A04">03</Location>
  </Patch>
  <Patch name="Formula 4E Dmg_(MA*Y) Hit(100)% becomes 4E Dmg_(MA*Y) Hit(MA+X)%">
    <Location file="BATTLE_BIN" offset="11f578">314d0508</Location>
    <Location file="BATTLE_BIN" offset="0ec4c4">
      F9382290
      21104300
      902D238C
      2A0062A4
      60190608
      00000000
    </Location>
  </Patch>
  <Patch name="Poison damage from 1/8 * MaxHP to 1/4 * CurrentHP">
    <Location file="BATTLE_BIN" offset="126800">28</Location>
    <Location file="BATTLE_BIN" offset="12680c">82</Location>
  </Patch>
  <Patch name="Poison damage from 1/8 * MaxHP to 1/8 * Min(999,MaxHP)">
    <Location file="BATTLE_BIN" offset="126804">
      054e0508
      00000000
    </Location>
    <Location file="BATTLE_BIN" offset="0ec814">
      E803432C
      02006014
      00000000
      E7030234
      1980033C
      902D638C
      03360608
      00000000
    </Location>
  </Patch>
  <Patch name="Regen heal from 1/8 * MaxHP to 1/8 * Min(999,MaxHP)">
    <Location file="BATTLE_BIN" offset="12682c">
      0D4E0508
      00000000
    </Location>
    <Location file="BATTLE_BIN" offset="0ec834">
      E803432C
      02006014
      00000000
      E7030234
      1980033C
      902D638C
      0D360608
      00000000
    </Location>
  </Patch>
  <Patch name="Soldier Office can rename any units (including humans and special characters)">
    <Location file="WORLD_WORLD_BIN" offset="041205">15</Location>
  </Patch>

  <Patch name="Cannot recruit any soldier from Soldier Office">
    <Location file="WORLD_WORLD_BIN" offset="584C6">03</Location>
  </Patch>

  <Patch name="Blade Grasp trigger : sword attack only">
    <Location file="BATTLE_BIN" offset="126054">5C4D0508</Location>
    <Location file="BATTLE_BIN" offset="12605C">20</Location>
    <Location file="BATTLE_BIN" offset="ec570">
      D8384390
      40200300
      21208300
      80200400
      0680053C
      2128A400
      BD2EA590
      FDFFA524
      0100A52C
      0300A014
      F3384290
      17340608
      00000224
      17340608
      00000000
    </Location>
  </Patch>
  <Patch name="Item innate all v1.1">
    <Location file="BATTLE_BIN" offset="11a4f0">374D0508</Location>
    <Location file="BATTLE_BIN" offset="ec4dc">
      12006290
      FAFF4224
      06004010
      13006290
      FAFF4224
      03004010
      06000234
      000002A2
      01001026
      FF000234
      3D050608
      00000000
    </Location>
  </Patch>
  <Patch name="Equip Change innate all">
    <Location file="BATTLE_BIN" offset="11a4de">20</Location>
  </Patch>
  <Patch name="Defend innate all v1.1">
    <Location file="BATTLE_BIN" offset="11A4CA">20</Location>
    <Location file="BATTLE_BIN" offset="1324D2">42</Location>
  </Patch>
  <Patch name="Defend Up innate all">
    <Location file="BATTLE_BIN" offset="11F2E6">20</Location>
  </Patch>

  <Patch name="Magic Defend Up innate all">
    <Location file="BATTLE_BIN" offset="11F336">20</Location>
  </Patch>

  <Patch name="Monster Skill innate all">
    <Location file="BATTLE_BIN" offset="11B5DE">20</Location>
  </Patch>

  <Patch name="Secret Hunt innate all">
    <Location file="BATTLE_BIN" offset="120D8E">20</Location>
  </Patch>

  <Patch name="Move Find Item innate all v1.1">
    <Location file="BATTLE_BIN" offset="1190B8">1C4D0508</Location>
    <Location file="BATTLE_BIN" offset="EC470">
      1B004392
      07006010
      06004392
      42190300
      01006330
      03006014
      00000000
      2F000608
      00000000
      37000608
      00000000
    </Location>
  </Patch>

  <Patch name="Secret Hunt ability isn't needed to enter Fur Shop">
    <Location file="WORLD_WORLD_BIN" offset="57166">20</Location>
  </Patch>

  <Patch name="Require Sword - Require Knight's Sword">
    <Location file="SCUS_942_21" offset="4CE68">FC</Location>
    <Location file="SCUS_942_21" offset="4CE6C">01</Location>
  </Patch>

  <Patch name="Require Sword - Require Ninja Blade / Sword / Knight's Sword / Katana">
    <Location file="SCUS_942_21" offset="4CE68">FE</Location>
    <Location file="SCUS_942_21" offset="4CE6C">04</Location>
  </Patch>

  <Patch name="Undead units receive 25% max HP damage from Phoenix Down">
    <Location file="BATTLE_BIN" offset="123334">82100200</Location>
  </Patch>
  <Patch name="Undead units receive 0 damage from all healing ability">
    <Location file="BATTLE_BIN" offset="120378">040060a4</Location>
  </Patch>

  <Patch name="Max of X items per battle">
    <Description>Should set Y to X+1</Description>
    <Location file="BATTLE_BIN" offset="11b864">6F4D0508</Location>
    <Location file="BATTLE_BIN" offset="119ed4">8F4D0508</Location>
    <Location file="BATTLE_BIN" offset="ec5bc">
      21900000
      0580013C
      D0972134
      1580023C
      AC354234
      00002390
    </Location>
    <Variable name="Y" file="BATTLE_BIN" offset="EC5D4"/>
    <Location file="BATTLE_BIN" offset="ec5d5">
      00642C
      05008014
      00000000
      F6FF6324
    </Location>
    <Variable name="X" file="BATTLE_BIN" offset="EC5E4"/>
    <!--
    <Variable name="X" file="BATTLE_BIN" offset="EC5E4">
      <Dupe offset="ec5d4" add="1"/>
    </Variable>
    -->
    <Location file="BATTLE_BIN" offset="EC5E5">
      000424
      804D0508
      00000000
      21200300
      21180000
      804D0508
      00000000
      000024A0
      000043A0
      01002124
      01004224
      01005226
      0E00442E
      EDFF8014
      00000000
      1580033C
      BB356334
      000060A0
      1980013C
      21900000
      1A0A0608
      00000000
    </Location>
    <Location file="BATTLE_BIN" offset="EC63C">
      1580023C
      BB354290
      21004014
      00000000
      1580023C
      00344234
      000044AC
      040045AC
      080046AC
      21300000
      0580023C
      D0974234
      1580033C
      AC356334
      00004490
      00006590
      21208500
      6400852C
      0200A014
      00000000
      63000424
      000044A0
      01004224
      01006324
      0100C624
      0E00C42C
      F3FF8014
      00000000
      01000424
      1580023C
      BB3544A0
      1580023C
      00344234
      0000448C
      0400458C
      0800468C
      1980023C
      44384294
      B7030608
      00000000
    </Location>
  </Patch>

  <Patch name="Undead units ignore Phoenix Down">
    <Location file="BATTLE_BIN" offset="123D22">02</Location>
  </Patch>

  <Patch name="Equip Crossbow - Equip Crossbow + Bow">
    <Location file="SCUS_942_21" offset="4CB08">18</Location>
  </Patch>

  <Patch name="Equip Crossbow - Equip Crossbow + Bow + Gun">
    <Location file="SCUS_942_21" offset="4CB08">38</Location>
  </Patch>

  <Patch name="Equip Gun - Equip Pole (Stick) + Bag + Cloth">
    <Location file="SCUS_942_21" offset="4CB54">4C</Location>
    <Location file="SCUS_942_21" offset="4CB5C">E0</Location>
    <Location file="SCUS_942_21" offset="4CB60">4C</Location>
  </Patch>

  <Patch name="Equip Gun - Equip Robe">
    <Location file="SCUS_942_21" offset="4CB54">4D</Location>
    <Location file="SCUS_942_21" offset="4CB5C">40</Location>
    <Location file="SCUS_942_21" offset="4CB60">4D</Location>
  </Patch>

  <Patch name="Equip Sword - Equip Sword + Knight's Sword">
    <Location file="SCUS_942_21" offset="4CAD0">18</Location>
  </Patch>

  <Patch name="Equip Sword - Equip Sword + Knight's Sword + Spear">
    <Location file="SCUS_942_21" offset="4CACB">94</Location>
    <Location file="SCUS_942_21" offset="4CAD0">18</Location>
    <Location file="SCUS_942_21" offset="4CAD1">01</Location>
    <Location file="SCUS_942_21" offset="4CAD7">A4</Location>
  </Patch>

  <Patch name="Equip Spear - Equip Rod + Staff + Instrument + Dictionary">
    <Location file="SCUS_942_21" offset="4CB1C">4A</Location>
    <Location file="SCUS_942_21" offset="4CB1F">94</Location>
    <Location file="SCUS_942_21" offset="4CB25">86</Location>
    <Location file="SCUS_942_21" offset="4CB28">4A</Location>
    <Location file="SCUS_942_21" offset="4CB2B">A4</Location>
  </Patch>

  <Patch name="Equip Knife - Equip Cloth(Dancer's Weapon)">
    <Location file="SCUS_942_21" offset="4CAE4">4C</Location>
    <Location file="SCUS_942_21" offset="4CAEC">20</Location>
    <Location file="SCUS_942_21" offset="4CAF0">4C</Location>
  </Patch>

  <Patch name="Equip Knife - Katana + Ninja Blade">
    <Location file="SCUS_942_21" offset="4CAEC">24</Location>
  </Patch>

  <Patch name="Equip Axe - Equip Axe + Flail">
    <Location file="SCUS_942_21" offset="4CB3B">94</Location>
    <Location file="SCUS_942_21" offset="4CB41">40</Location>
    <Location file="SCUS_942_21" offset="4CB47">A4</Location>
  </Patch>

  <Patch name="Equip Shield - Equip Rod + Staff">
    <Location file="SCUS_942_21" offset="4CAAC">4A</Location>
    <Location file="SCUS_942_21" offset="4CAAF">94</Location>
    <Location file="SCUS_942_21" offset="4CAB4">01</Location>
    <Location file="SCUS_942_21" offset="4CAB5">80</Location>
    <Location file="SCUS_942_21" offset="4CAB8">4A</Location>
    <Location file="SCUS_942_21" offset="4CABB">A4</Location>
  </Patch>

  <Patch name="Change Drain and Demi formulas to use CurHP">
    <Description>
      Formula 4D [Mutilate, Drain Touch]
      4D AbsHP_(Y)% * MaxHP Hit_(MA+X)% NS becomes 4D AbsHP_(Y)% * CurHP Hit_(MA+X)% NS

      Formula 09 [Demi, Demi 2, Lich]
      09 Dmg_(Y/100)% * MaxHP Hit_F(MA+X)% becomes 09 Dmg_(Y/100)% * CurHP Hit_F(MA+X)%

      Formula 10 [Life Drain, Drain]
      10 AbsHP_(Y)% * MaxHP Hit_F(MA+X)% NS becomes 10 AbsHP_(Y)% * CurHP Hit_F(MA+X)% NS
    </Description>
    <Location file="BATTLE_BIN" offset="11f630">28</Location>
  </Patch>

  <Patch name="Change Drain and Demi formulas to use Min(999,MaxHP)">
    <Description>
      Formula 4D [Mutilate, Drain Touch]
      4D AbsHP_(Y)% * MaxHP Hit_(MA+X)% NS becomes 4D AbsHP_(Y)% * Min(999,MaxHP) Hit_(MA+X)% NS

      Formula 09 [Demi, Demi 2, Lich]
      09 Dmg_(Y/100)% * MaxHP Hit_F(MA+X)% becomes 09 Dmg_(Y/100)% * Min(999,MaxHP) Hit_F(MA+X)%

      Formula 10 [Life Drain, Drain]
      10 AbsHP_(Y)% * MaxHP Hit_F(MA+X)% NS becomes 10 AbsHP_(Y)% * Min(999,MaxHP) Hit_F(MA+X)% NS
    </Description>
    <Location file="BATTLE_BIN" offset="11F62C">FF4D0508</Location>
    <Location file="BATTLE_BIN" offset="EC7FC">
      E803622C
      02004014
      00000000
      E7030334
      8D190608
      00000000
    </Location>
  </Patch>
  <Patch name="Performing gain evasion and receive 150% damage from physical attack">
    <Location file="BATTLE_BIN" offset="11E444">08</Location>
    <Location file="BATTLE_BIN" offset="11F3DC">09</Location>
  </Patch>

  <Path name="Katanas chance to break">
    <Variable file="SCUS_942_21" offset="543EC" default="7" name="Asura"/>
    <Variable file="SCUS_942_21" offset="543F4" default="8" name="Koutetsu"/>
    <Variable file="SCUS_942_21" offset="543FC" default="9" name="Bizen Boat"/>
    <Variable file="SCUS_942_21" offset="54404" default="A" name="Murasame"/>
    <Variable file="SCUS_942_21" offset="5440C" default="B" name="Heaven's Cloud"/>
    <Variable file="SCUS_942_21" offset="54414" default="C" name="Kiyomori"/>
    <Variable file="SCUS_942_21" offset="5441C" default="E" name="Muramasa"/>
    <Variable file="SCUS_942_21" offset="54424" default="F" name="Kikuichimoji"/>
    <Variable file="SCUS_942_21" offset="5442C" default="12" name="Masamune"/>
    <Variable file="SCUS_942_21" offset="54434" default="14" name="Chirijiraden"/>
  </Path>


  <Patch name="Change Potions to use % of Max HP">
    <Description>
      Potion Formula = Max(030,X% Max HP)
      Hi-Potion Formula = Max(070,Y% Max HP)
      X-Potion Formula = Max(150,Z% Max HP)
    </Description>
    <Variable file="BATTLE_BIN" offset="EC774" name="X"/>
    <Variable file="BATTLE_BIN" offset="EC775" name="Y"/>
    <Variable file="BATTLE_BIN" offset="EC776" name="Z"/>
    <Location file="BATTLE_BIN" offset="123284">DE4D0508</Location>
    <Location file="BATTLE_BIN" offset="EC778">
      00
      1580033C
      00346334
      000064AC
      040065AC
      080066AC
      1980043C
      DB388490
      0300852C
      1100A010
      00000000
      1980063C
      982DC68C
      2A00C694
      1580053C
      7437A534
      2128A400
      0000A590
      1800C500
      12280000
      64000434
      1A00A400
      12280000
      2B204500
      02008010
      00000000
      21100500
      0000648C
      0400658C
      0800668C
      1980033C
      902D638C
      A3280608
      00000000
    </Location>
  </Patch>
</Patches>
